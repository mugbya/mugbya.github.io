---
layout: post
title: 有关Java中参数传替的机制
thread: 16
categories: 记录
tags: java
---

    引言：之前一直模糊这些问题，最近查阅部分资料，再加之自己做题验证了一些问题，在此贴出吧

首先以此文为参考，做的验证，且摘抄引用内容

 - 链接： <a href="http://www.cnblogs.com/perfy/archive/2012/10/16/2726039.html" target="_blank"> 路人浅笑 </a>
 
 
 参数是按值而不是按引用传递. 说明 Java 应用程序有且仅有的一种参数传递机制，即按值传递。  
 
 

在 Java 应用程序中永远不会传递对象，而只传递对象的引用。所以是按引用传递对象。Java 应用程序按引用传递对象这一事实并不意味着 Java 应用程序按引用传递参数。参数可以是对象引用，而 Java 应用程序是按值传递对象引用的。

 

Java 应用程序中的变量可以为以下两种类型之一：引用类型或基本类型。当作为参数传递给一个方法时，处理这两种类型的方式是相同的。两种类型都是按值传递的；没有一种按引用传递。

 

按值传递和按引用传递。按值传递意味着当将一个参数传递给一个函数时，函数接收的是原始值的一个副本。因此，如果函数修改了该参数，仅改变副本，而原始值保持不变。按引用传递意味着当将一个参数传递给一个函数时，函数接收的是原始值的内存地址，而不是值的副本。因此，如果函数修改了该参数，调用代码中的原始值也随之改变。

1、对象是按引用传递的
2、Java 应用程序有且仅有的一种参数传递机制，即按值传递
3、按值传递意味着当将一个参数传递给一个函数时，函数接收的是原始值的一个副本
4、按引用传递意味着当将一个参数传递给一个函数时，函数接收的是原始值的内存地址，而不是值的副本

####文中给出了很多例子，这里我只简略用 内存图 的方式分析其中一个
  
##<code>code ： </code>
  
	class Test03{
    	public static void main(String[] args){
        	StringBuffer s= new StringBuffer("good");
            StringBuffer s2=new StringBuffer("bad");
            test(s,s2);
            System.out.println(s);       // 9
            System.out.println(s2);      // 10
        }
        static void test(StringBuffer s,StringBuffer s2) {
            System.out.println(s);         // 1
            System.out.println(s2);        // 2
            s2=s;                        // 3
            s=new StringBuffer("new");     // 4
            System.out.println(s);        // 5
            System.out.println(s2);       // 6
            s.append("hah");             // 7
            s2.append("hah");            // 8
        }
     }
     
#### ->_->因为我做错了， 所以我就把这个内存图画出来了
   
   - 1 刚生成的对象在内存的状态显而易见，我就略过，直接从函数调用传入参数进去开始画了
   - 2 在 test(s,s2) 被调用时内存状态
       ![图1](/assets/java_res/Java_2014010301.png)
   - 3 在经历3、4 步后的内存状态为
       ![图2](/assets/java_res/Java_2014010302.png)
   - 4 在经历 7、8 后的内存情况为
       ![图3](/assets/java_res/Java_2014010303.png)
   - 5 在调用函数结束后，返回主函数的内存情况
       ![图4](/assets/java_res/Java_2014010304.png)

    其实这个题里面，既有参数的传替，又在函数内部有对象引用的传替。初学看得很晕，但一画图就出来的。
    
###最后题一个面试中常考的题


        public class Test_String {
            String str = new String("Hello world ");
            char [] ch = {'a','b','c'};
            public static void main(String[] args) {
                Test_String test = new Test_String();
                test.change(test.str, test.ch);
                System.out.print(test.str + "and ");
                System.out.println(test.ch);
            }
            public void change(String str,char chw[]) {
                str = "test ok";
                chw[0] = 'g';
            }
        }

    
答案是 <code>Hello world and gbc</code>  ,做对了么？做不对就学我画图吧 ^_^ （需要注意的是String类型的不变型）
 
  - 于 2014 年 1 月 3 号 完结
